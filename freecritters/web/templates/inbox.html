{% extends "layout" %}
{% marker "title" set "Inbox" %}
{% block "content" %}
<p>Here's your inbox. Would you like to <a href="/mail/send">send a message</a>?</p>
{% if not conversations %}
<p><strong>You don't have any mail.</strong></p>
{% else %}
<form action="/mail/delete" method="post">
<div>
<input type="hidden" name="form_token" value="{{ form_token|e }}">
<input type="hidden" name="page" value="{{ paginator.page_num|e }}">
</div>
<table>
<thead>
<tr>
<th>Del</th>
<th>Subject</th>
<th>With</th>
</tr>
</thead>
<tbody>
{% for conversation in conversations %}
<tr>
<td><input type="checkbox" name="del" value="{{ conversation.id|e }}"></td>
<td class="subjectcell{% if conversation.new %} newsubjectcell{% endif %}">{% if conversation.new %}<strong>{% endif %}<a href="{{ conversation.link|e }}">{{ conversation.subject|e }}</a>{% if conversation.new %}</strong>{% endif %}</td>
<td>
{% if conversation.other_participants equals None %}
<em>system-generated</em>
{% else %}
{% for participant in conversation.other_participants %}
{% if not loop.first %}, {% endif %}<a href="{{ participant.link|e }}">{{ participant.username|e }}</a>
{% endfor %}
{% endif %}
</td>
</tr>
{% endfor %}
</tbody>
</table>
<p><input type="submit" value="Delete checked"></p>
</form>
{% require "paginator" %}
{% call "paginator_in_box" paginator, True %}
{% endif %}
{% endblock %}
